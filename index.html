<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FCL å¯åŠ¨å™¨ä¸‹è½½ç«™</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: #f5f7fa;
            color: #1e293b;
            line-height: 1.6;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 2rem auto;
        }
        .announcement {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .announcement-header {
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: #856404;
        }
        .announcement-content p {
            margin-bottom: 0.5rem;
        }
        .note {
            font-size: 0.9rem;
            color: #6c757d;
        }
        .welcome {
            text-align: center;
            margin-bottom: 2rem;
        }
        .welcome h1 {
            font-size: 2.2rem;
            color: #0d6efd;
            margin-bottom: 0.5rem;
        }
        .welcome p {
            font-size: 1.1rem;
            color: #475569;
        }
        .card {
            background: white;
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
            transition: transform 0.2s;
            margin-bottom: 1.5rem;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card h2 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: #0d6efd;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 10px;
        }
        .version {
            background: #e9ecef;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            color: #495057;
        }
        .size {
            background: #e9ecef;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            color: #495057;
        }
        .download-btn {
            display: inline-block;
            padding: 0.75rem 2rem;
            background: #0d6efd;
            color: white;
            text-decoration: none;
            border-radius: 2rem;
            font-weight: 500;
            font-size: 1.1rem;
            transition: background 0.2s;
            border: none;
            cursor: pointer;
        }
        .download-btn:hover {
            background: #0b5ed7;
        }
        .download-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        .footer {
            text-align: center;
            margin-top: 3rem;
            color: #6c757d;
            font-size: 0.9rem;
        }
        .footer a {
            color: #0d6efd;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å…¬å‘ŠåŒºï¼ˆä½ å¯ä»¥è‡ªç”±ä¿®æ”¹æ–‡å­—ï¼‰ -->
        <div class="announcement">
            <div class="announcement-header">ğŸ“¢ é‡è¦å…¬å‘Š</div>
            <div class="announcement-content">
                <p>è¿™é‡Œæ˜¯ä½ çš„å…¬å‘Šå†…å®¹ï¼Œå¯ä»¥ä¿®æ”¹æˆä»»ä½•ä½ æƒ³è¯´çš„è¯ã€‚</p>
                <p>ä¾‹å¦‚ï¼šç‰ˆæœ¬æ›´æ–°é€šçŸ¥ã€é˜²éª—æé†’ã€èµåŠ©æ„Ÿè°¢ç­‰ã€‚</p>
                <p class="note">ä¸‹è½½æ—¶è¯·ä¸è¦å¤šæ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œé¿å…æœåŠ¡å™¨å‹åŠ›ã€‚</p>
            </div>
        </div>

        <!-- æ¬¢è¿åŒº -->
        <div class="welcome">
            <h1>ğŸ‰ FCL å¯åŠ¨å™¨ä¸‹è½½ç«™ ğŸ‰</h1>
            <p>æ¯å°æ—¶è‡ªåŠ¨åŒæ­¥å®˜æ–¹æœ€æ–°ç‰ˆæœ¬ï¼Œæ— éœ€æ‰‹åŠ¨æ›´æ–°ã€‚</p>
        </div>

        <!-- ä¸‹è½½å¡ç‰‡ -->
        <div class="card" id="downloadCard">
            <h2>FCL å¯åŠ¨å™¨</h2>
            <div class="info-row">
                <span class="version" id="version">åŠ è½½ä¸­...</span>
                <span class="size" id="size">åŠ è½½ä¸­...</span>
            </div>
            <a href="#" class="download-btn" id="downloadBtn" target="_blank">â¬‡ï¸ ä¸‹è½½æœ€æ–°ç‰ˆ</a>
        </div>

        <!-- åº•éƒ¨ä¿¡æ¯ -->
        <div class="footer">
            <p>å¦‚æœå–œæ¬¢è¿™ä¸ªç«™ï¼Œå¯ä»¥ <a href="#">èµåŠ©</a> æˆ–å¸®å¿™å®£ä¼ ï¼</p>
            <p>æ•°æ®æ¯å°æ—¶è‡ªåŠ¨åŒæ­¥è‡ª <a href="https://github.com/FCL-Team/FoldCraftLauncher" target="_blank">FCL-Team/FoldCraftLauncher</a></p>
        </div>
    </div>

    <script>
        (function() {
            const versionEl = document.getElementById('version');
            const sizeEl = document.getElementById('size');
            const downloadBtn = document.getElementById('downloadBtn');

            // ç¦ç”¨æŒ‰é’®ç›´åˆ°è·å–åˆ°æ•°æ®
            downloadBtn.style.pointerEvents = 'none';
            downloadBtn.style.opacity = '0.6';
            downloadBtn.textContent = 'è·å–ç‰ˆæœ¬ä¸­...';

            // è¯·æ±‚æœ¬åœ°çš„ latest.jsonï¼ˆå’Œ index.html åœ¨åŒä¸€ä¸ªä»“åº“ï¼‰
            fetch('/latest.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`æ— æ³•è·å– latest.json (HTTP ${response.status})`);
                    }
                    return response.json();
                })
                .then(data => {
                    // æå–ç‰ˆæœ¬å·
                    const version = data.tag_name || 'æœªçŸ¥ç‰ˆæœ¬';
                    versionEl.textContent = `ç‰ˆæœ¬: ${version}`;

                    // æå–ä¸‹è½½é“¾æ¥å’Œæ–‡ä»¶å¤§å°
                    let downloadUrl = '#';
                    let fileSize = 'æœªçŸ¥å¤§å°';

                    if (data.assets && data.assets.length > 0) {
                        // ä¼˜å…ˆé€‰å– .apk æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰å°±å–ç¬¬ä¸€ä¸ª
                        const apkAsset = data.assets.find(asset => asset.name.endsWith('.apk'));
                        const targetAsset = apkAsset || data.assets[0];

                        if (targetAsset) {
                            downloadUrl = targetAsset.browser_download_url;
                            // å°†å­—èŠ‚è½¬æ¢ä¸º MBï¼Œä¿ç•™ä¸¤ä½å°æ•°
                            const sizeInMB = (targetAsset.size / (1024 * 1024)).toFixed(2);
                            fileSize = `${sizeInMB} MB`;
                        }
                    }

                    // æ›´æ–°ä¸‹è½½æŒ‰é’®å’Œæ–‡ä»¶å¤§å°
                    downloadBtn.href = downloadUrl;
                    downloadBtn.textContent = 'â¬‡ï¸ ä¸‹è½½æœ€æ–°ç‰ˆ';
                    downloadBtn.style.pointerEvents = 'auto';
                    downloadBtn.style.opacity = '1';

                    sizeEl.textContent = `å¤§å°: ${fileSize}`;
                })
                .catch(error => {
                    console.error('è·å–ç‰ˆæœ¬ä¿¡æ¯å¤±è´¥:', error);
                    versionEl.textContent = 'ç‰ˆæœ¬: è·å–å¤±è´¥';
                    sizeEl.textContent = 'å¤§å°: æœªçŸ¥';
                    downloadBtn.textContent = 'æš‚æ— æ³•è·å–ä¸‹è½½é“¾æ¥';
                    downloadBtn.style.pointerEvents = 'none';
                    downloadBtn.style.opacity = '0.6';
                });
        })();
    </script>
</body>
</html>